<?php 	$headParams = [		'parent'	=>	$parent, 		'alias'		=>	$alias, 		'id'		=>	$id, 		'item_id'	=>	$item_id, 		'appTable'	=>	$appTable, 		'type'		=>	'menuEditHeader'	];		$data['headContent'] = $zh->getCardEditHeader($headParams);		$cardItem = $zh->getProblem($item_id, $lpx);	$organizations = $zh->getOrganizations();	$statuses = $zh->getStatuses();	$langs = $zh->getAvailableLangs();	$lpx_name = ($lpx ? $lpx : 'en');	$rootPath = ROOT_PATH;	$cardTmp = [		'LPX'					=>	['type'=>'hidden',	'field'=>'lpx', 'value'=>$lpx],		'Проект'				=>	['type'=>'input', 	'field'=>'name', 			'params'=>[ 'size'=>100, 'hold'=>'Название', 'onchange'=>"change_alias()"] ],		'Алиас (URL)'			=>	['type'=>'input', 	'field'=>'alias', 			'params'=>[ 'size'=>100, 'hold'=>'url'] ],		'clear-0'				=>	['type'=>'clear'],		'Нас. пункт'			=>	['type'=>'input', 	'field'=>'location', 		'params'=>[ 'size'=>100, 'hold'=>'Киев'] ],		'clear-1'				=>	['type'=>'clear'],		'Статус'				=>	['type'=>'select', 	'field'=>'status', 			'params'=>[ 'list'=>$statuses,																							'first'=>['name'=>'Не выбран', 'id'=>0], 																							'fieldValue'=>'id', 																							'fieldTitle'=>'name',																							'currValue'=>$cardItem['status'],																					  ] ],			'Организация'			=>	['type'=>'select', 	'field'=>'user_id', 		'params'=>[ 'list'=>$organizations,																							'first'=>['org_name'=>'Не выбран', 'id'=>0], 																							'fieldValue'=>'id', 																							'fieldTitle'=>'org_name',																							'currValue'=>$cardItem['user_id'],																					  ] ],		'clear-2'				=>	['type'=>'clear'],		'Дедлайн'				=>	['type'=>'date', 		'field'=>'deadline', 		'params'=>[ 'size'=>100, 'hold'=>'Бюджет'] ],		'Лайки'					=>	['type'=>'input', 		'field'=>'likes', 			'params'=>[ 'size'=>20, 'disabled'=>true] ],		'Публикация'			=>	['type'=>'block', 		'field'=>'moderation', 		'params'=>[ 'reverse'=>false ] ],		'clear-3'				=>	['type'=>'clear' ],		'Описание (краткое)'	=>	['type'=>'area', 		'field'=>'desc', 			'params'=>[] ],		'Описание (полное)'		=>	['type'=>'area', 		'field'=>'desc_full', 		'params'=>[] ],		'Изображения'			=>  ['type'=>'header'],																					  		'Изображение'			=>	['type'=>'image_mono', 	'field'=>'cover', 		'params'=>['path'=>RSF."/webroot/img/covers/", 'appTable'=>$pageTable, 'id'=>1 ] ],		'Имя изображения'		=>	['type'=>'hidden',		'field'=>'curr_filename', 	'params'=>['field'=>"cover" ] ],		'Вложения'				=>  ['type'=>'header'],				'Файлы'					=>	['type'=>'files', 		'field'=>'files', 			'params'=>['path'=>RSF."/webroot/uploads/",'field'=>'filename','appTable'=>'problems_files', 'id'=>1 ] ],	];	$cardEditFormParams = [		'cardItem'	=>	$cardItem, 		'cardTmp'	=>	$cardTmp, 		'rootPath'	=>	$rootPath, 		'actionName'=>	"editProblem", 		'ajaxFolder'=>	'edit', 		'appTable'	=>	$appTable, 		'headParams'=>	$headParams, 		'langs'		=>	$langs	];		$cardEditFormStr = $zh->getCardEditForm($cardEditFormParams);	// Reviews prepare start	$itemsList = $zh->getProblemSolutions($params,$item_id);	$totalItems = $zh->getProblemSolutions($params,$item_id,true);		$on_page = (isset($_COOKIE['global_on_page']) ? $_COOKIE['global_on_page'] : GLOBAL_ON_PAGE);	$pages = ceil($totalItems/$on_page);	$start_page = (isset($params['start']) ? $params['start'] : 1);		$frst_page = 1;	$prev_page = 1;	$next_page = $pages;	$last_page = $pages;					if($start_page < $pages) $next_page = $start_page+1;	if($start_page > 1) $prev_page = $start_page-1;		$tableColumns = [		' '					=>	['type'=>'text',		'field'=>'&nbsp'],		'Организация'		=>	['type'=>'text',		'field'=>'organization'],		'Решение'			=>	['type'=>'text',		'field'=>'text'],		'Лайки'				=>	['type'=>'text',		'field'=>'likes'],		'Голоса'			=>	['type'=>'text',		'field'=>'votes'],	    'Модерация'			=>	['type'=>'text',		'field'=>'moderation',                           																			'params'=>[												'type'=>'ajaxColumn',												'alias'=>'Ostatus',												'form'=>'trigger',												'data'=>['1'=>'Да','0'=>'Нет'],												'active'=>'moderation',												'clickFunction'=>'SolutionBlockUpdate'											]],			'Просмотр'			=>	['type'=>'cardViewTrigger',	'field'=>'Смотреть'],	];		$headParams = [		'parent'	=>	$parent, 		'alias'		=>	'solutions-list',		'id'		=>	73, 		'item_id'	=>	1, 		'appTable'	=>	'osc_problems_solutions'	];	$tableParams = [		'itemsList'		=>	$itemsList, 		'tableColumns'	=>	$tableColumns, 		'headParams'	=>	$headParams	];		$tableStr = $zh->getItemsTable($tableParams);		$pagiParams = [		'headParams'=>	$headParams, 		'start_page'=>	$start_page, 		'pages'		=>	$pages, 		'on_page'	=>	$on_page	];		$pagiStr = $zh->getLandingPagination($pagiParams);	// Reviews prepare end	$data['bodyContent'] .= "<div class='ipad-20' id='order_conteinter'><h3 class='new-line'>Редактирование проблемы #$item_id</h3>";	$data['bodyContent'] .= $cardEditFormStr;	$data['bodyContent'] .=	"</div>";	$data['bodyContent'] .= "</div><!-- landCluster --><div class='divider'></div>";	$data['bodyContent'] .= "<h2 class='tableCaption'>РЕШЕНИЯ:</h2>";	$data['bodyContent'] .= $tableStr;	$data['bodyContent'] .= $pagiStr;?>